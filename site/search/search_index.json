{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Bartender","text":"<p>Welcome to Bartender. Would you like your tracks shaken, not stirred?</p>"},{"location":"#what-bartender-does","title":"What Bartender Does","text":"<p>Bartender uses Spotify audio features to organise and transition songs in creative ways:</p> <ul> <li>Stirred Mode: Plays songs in clusters of similar tracks, inserting smooth midpoint transitions between clusters for a more cohesive flow.</li> <li>Shaken Mode: Chooses the most contrasting songs from the playlist to create energetic, unpredictable jumps between tracks.</li> <li>Playlist Creation: Generates new playlists based on the selected transition mode.</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<ol> <li>Clone the Bartender repository:  </li> </ol> <pre><code>git clone &lt;your-repo-url&gt;\ncd bartender\n</code></pre> <ol> <li>Install dependencies:</li> </ol> <pre><code>pip install -r requirements.txt\n</code></pre> <ol> <li>Run Bartender and start mixing your tracks!</li> </ol>"},{"location":"bartender_explained/","title":"How Bartender Works","text":""},{"location":"bartender_explained/#why-i-built-this-transition-engine","title":"Why I Built This Transition Engine","text":"<p>When I add songs on spotify, I tend to just toss in any song I was interested in at that point in time into my main playlist. In 2024, I got really into J-POP, so I added a bunch of J-POP classics into the mix. Fast forward into 2025, Expedition 33 and Hollow Knight: SilkSong came out, and of course I dumped the soundtracks' greatest hits into there. </p> <p>As you can probably tell, the huge difference in genres that make up my playlist has consequently made it into a mess. I tried using the shuffle feature to spread out my tracks evenly but I felt that it wasn't really working. </p> <p>I realised what I needed was something that could strategically organise my songs such that I wouldn't get whiplash when the tracks switched from a calm OST to a sudden high BPM boss fight OST.</p>"},{"location":"bartender_explained/#explaining-bartender","title":"Explaining Bartender","text":"<p>I chose the theme Bartender because I envisioned a bartender shaking up and mixing drinks, or rather songs, and then serving them as one playlist. It also kind of works out because of the play on words \"bar\" and \"tender\", like bars of a song. I am very funny.</p> <p>The core functionality of Bartender can be broken down into these steps:</p> <ol> <li>Analyse your playlist songs</li> <li>Cluster them by audio features</li> <li>Rearrange the songs with a transition algorithm</li> <li>Spit out the new playlist (voil\u00e0)</li> </ol> <p>The playlist is intended to be played in the given order, so you won't see any difference if you play it on shuffle or magic shuffle.</p>"},{"location":"bartender_explained/#explaining-clustering","title":"Explaining Clustering","text":"<p>The clustering algorithm is quite simple. First, I utilised the Spotify Web API to fetch all the songs in the playlist. I then used Reccobeats to fetch their individual audio features, and convert them into column vectors. Using K-means Clustering, I split the playlist up into k clusters, with each cluster having songs with similar patterns or audio features. </p>"},{"location":"bartender_explained/#introducing-the-two-transition-modes-stirred-vs-shaken","title":"Introducing the two transition modes: Stirred vs Shaken","text":"<p>My inspiration for the transition modes came from the iconic catchphrase \"Shaken, not stirred\" from James Bond. I don't know what it means nor have I watched James Bond.</p>"},{"location":"bartender_explained/#stirred-mode","title":"Stirred Mode","text":"<p>The Stirred mode is designed to simulate a smooth pour kind of transition. The idea is simple: songs that sound similar should play close together, and transitions between different \"flavours\" of music should be more natural rather than abrupt.</p>"},{"location":"bartender_explained/#step-1-cluster-the-playlist","title":"Step 1: Cluster the playlist","text":"<p>First, the playlist is clustered using audio features such as energy, tempo, valence, and danceability. Each cluster represents a flavor profile, which is what I call a group of songs that are already musically similar. Since songs within a cluster are close to each other in feature space, playing them consecutively already produces a smooth listening experience.</p>"},{"location":"bartender_explained/#step-2-order-clusters-by-similarity","title":"Step 2: Order clusters by similarity","text":"<p>Stirred mode determines the order in which clusters should be played. Starting from an initial cluster, the algorithm repeatedly selects the nearest unvisited cluster, based on the distance between the cluster centroids. This is done using a greedy nearest-neighbour heuristic. This results in an ordering where each cluster transition is as smooth as possible</p>"},{"location":"bartender_explained/#step-3-insert-a-midpoint-transition-song","title":"Step 3: Insert a midpoint transition song","text":"<p>To further soften transitions between clusters, Stirred mode introduced a midpoint song.</p> <p>For each transition from cluster A to B:</p> <ol> <li> <p>Draw a line between the centroids of cluster A and B</p> </li> <li> <p>Compute the midpoint M of that line</p> </li> <li> <p>Find the sond whose audio feature vector is closest to M</p> </li> </ol> <p>This midpoint song acts like a bridge between clusters, where it theoretically shares characteristics of both clusters and helps ease the listener into the next flavour.</p>"},{"location":"bartender_explained/#step-4-assemble-the-final-playlist","title":"Step 4: Assemble the final playlist","text":"<p>The final playlist is constructed as:</p> <ul> <li>All songs from cluster A</li> <li>A midpoint transition song</li> <li>All songs from cluster B</li> <li>Repeat until all clusters are visited</li> </ul>"},{"location":"bartender_explained/#shaken-mode","title":"Shaken Mode","text":"<p>The Shaken mode is the complete opposite. Instead of minimising distance between transitions, it maximises contrast. While Stirred mode's agenda is \"What comes next most smoothly?\", Shaken mode's agenda is \"What would feel the most surprising right now?\"</p> <p>In this mode:</p> <ul> <li>Songs frequently jump across distant clusters</li> <li>Transitions are intentionally energetic</li> <li>The playlist is unpredictable</li> </ul> <p>However, despite the chaos, Shaken mode is still controlled, where transitions are driven by audio feature distances rather than pure randomness alone.</p>"},{"location":"bartender_explained/#step-1-choose-a-random-starting-song","title":"Step 1: Choose a random starting song","text":"<p>Shaken mode begins by selecting a random song from the playlist. This track becomes the starting point of the sequence and sets the stage for the initial musical context.</p>"},{"location":"bartender_explained/#step-2-decide-jump-type-controlled-chaos","title":"Step 2: Decide jump type (controlled chaos)","text":"<p>At each step, the algorithm decides how the next song should be chosen. A random number n from 0 to 1 is drawn.</p> <p>With probability p (default 0.7):</p> <ul> <li>It attempts an intra-cluster jump, staying within the same flavour profile</li> <li>Considers only unused songs from the current cluster</li> </ul> <p>With probability 1 - p (default 0.3):</p> <ul> <li>It forces an inter-cluster jump, moving to a completely differenet flavour profile.</li> <li>Considers only unused songs from songs from all other clusters</li> </ul> <p>If no valid intra-cluster songs remain, the algorithm automatically falls back to an inter-cluster jump. Same for vice versa.</p> <p>This balance prevents the playlist from being either too smooth or completely chaotic.</p>"},{"location":"bartender_explained/#step-3-maximise-contrast","title":"Step 3: Maximise contrast","text":"<p>Shaken mode selects the song that is fartest away from the current song in the feature space. This ensures that each transition introduces a maxmimum contrast.</p>"},{"location":"bartender_explained/#step-4-repeat-until-all-songs-are-used","title":"Step 4: Repeat until all songs are used","text":"<p>The algorithm repeats this process, selecting the farthest valid song at each step, be it intra or inter-cluster, until every song in the playlist has been used exactly once.</p> <p>The final result is a playlist that constantly keeps the listener on edge. </p>"},{"location":"bartender_explained/#conclusion","title":"Conclusion","text":"<p>Now, I can't say for sure whether these stirred or shaken transitions, defined purely by audio features, truly translate into their equivalent transitions when experienced by a human listener.</p> <p>Music perception is subjective and while the distance in audio feature space is a useful approximation for similarity and contrast, it probably doesn't fully capture the emotional context, or the narrative or taste the listener builds up over time, or whatever it is.</p> <p>Anyway, Bartender's original intention was never about finding a perfect transition. It was more of a passion project of mine to explore whether I could utilise simple geometric and clustering concepts to shape a playlist in a way that feels intentional instead of random. </p>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#whats-the-difference-between-stirred-and-shaken","title":"What's the difference between Stirred and Shaken?","text":"<p>Stirred prioritises smoothness and gradual transitions between similar songs and clusters.\\ Shaken maximises contrast, jumping between distant songs and clusters to create surprise and greater entropy.</p> <p>Both modes use the same underlying audio features but apply different traversal techniques.</p>"},{"location":"faq/#why-dont-transitions-involve-actual-audio-crossfades-or-beat-matching","title":"Why don't transitions involve actual audio crossfades or beat matching?","text":"<p>That was actually the original concept for Bartender. Unfortunately, Spotify's Web API doesn't allow access to the raw audio or playback buffers. Bartender only operates at the playlist sequencing level, not the audio processing level.</p>"},{"location":"faq/#can-songs-repeat-or-be-skipped","title":"Can songs repeat or be skipped?","text":"<p>The transition engine tracks which songs have already been used to avoid duplicates. If missing songs occur, it's usually because the Reccobeat API cannot recognise the Spotify song, and is thus unable to fetch its audio features for the clustering.</p>"},{"location":"faq/#why-use-k-means-clustering","title":"Why use K-Means clustering?","text":"<p>K-Means is fast, interpretable and works well for low-dimensional numeric feature spaces like Spotify audio features. Also, since playlist sizes are relatively small (approx 200?), the time complexity of K-Means is pretty effificient.</p>"},{"location":"faq/#is-this-meant-to-be-a-real-dj-replacement","title":"Is this meant to be a real DJ replacement?","text":"<p>Nope, it's more of an algorithmic mixtape, cocktail if you will.</p>"},{"location":"api_reference/reccobeats_utils/","title":"ReccoBeats Utils","text":"<p>Utility functions for interacting with the ReccoBeats API. These helpers fetch track info and audio features using a Spotify track ID.</p>"},{"location":"api_reference/reccobeats_utils/#configuration","title":"Configuration","text":"<ul> <li>Base API URL: <code>https://api.reccobeats.com/v1</code></li> <li>Requires the <code>requests</code> library.</li> <li>Can be used alongside <code>spotipy_utils</code> for Spotify integration.</li> </ul>"},{"location":"api_reference/reccobeats_utils/#track-data","title":"Track Data","text":""},{"location":"api_reference/reccobeats_utils/#get_reccobeats_track_dataspotify_id","title":"<code>get_reccobeats_track_data(spotify_id)</code>","text":"<p>Fetches ReccoBeats track info for a given Spotify track ID.</p> <p>Returns: A dictionary representing the first track in the ReccoBeats <code>content</code> list, or <code>None</code> if not found.</p> <p>Example fields returned:</p> <ul> <li><code>id</code> \u2013 ReccoBeats track ID  </li> <li><code>trackTitle</code> \u2013 Track title  </li> <li><code>artists</code> \u2013 List of artist objects  </li> <li><code>durationMs</code> \u2013 Track duration in milliseconds  </li> <li><code>href</code> \u2013 Spotify track link  </li> <li><code>popularity</code> \u2013 Track popularity  </li> </ul>"},{"location":"api_reference/reccobeats_utils/#get_reccobeats_track_idspotify_id","title":"<code>get_reccobeats_track_id(spotify_id)</code>","text":"<p>Returns the ReccoBeats track ID for a given Spotify track ID.  </p>"},{"location":"api_reference/reccobeats_utils/#print_reccobeats_track_idspotify_id","title":"<code>print_reccobeats_track_id(spotify_id)</code>","text":"<p>Fetches and prints the ReccoBeats track ID.</p> <p>Example output:</p> <pre><code>ReccoBeats track id: de5f8816-bde0-4123-9cdd-b0b13d921386\n</code></pre>"},{"location":"api_reference/reccobeats_utils/#print_reccobeats_track_titlespotify_id","title":"<code>print_reccobeats_track_title(spotify_id)</code>","text":"<p>Prints the track title from ReccoBeats for a given Spotify track ID.</p> <p>Example output:</p> <pre><code>Track Title: Do I Wanna Know?\n</code></pre>"},{"location":"api_reference/reccobeats_utils/#audio-features","title":"Audio Features","text":""},{"location":"api_reference/reccobeats_utils/#get_reccobeats_audio_featurestrack_id","title":"<code>get_reccobeats_audio_features(track_id)</code>","text":"<p>Fetches audio features for a ReccoBeats track ID.</p> <p>Returns: A dictionary with keys like:</p> <ul> <li><code>acousticness</code> </li> <li><code>danceability</code> </li> <li><code>energy</code> </li> <li><code>instrumentalness</code> </li> <li><code>liveness</code> </li> <li><code>loudness</code> </li> <li><code>speechiness</code> </li> <li><code>valence</code> </li> <li><code>tempo</code> </li> <li><code>key</code> </li> <li><code>mode</code> </li> </ul>"},{"location":"api_reference/reccobeats_utils/#print_reccobeats_audio_featuresspotify_id","title":"<code>print_reccobeats_audio_features(spotify_id)</code>","text":"<p>Fetches and prints audio features for a Spotify track ID by internally resolving the ReccoBeats ID.</p> <p>Example output:</p> <pre><code>ReccoBeats Audio Features\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nAcousticness : 0.186\nDanceability : 0.548\nEnergy : 0.532\nInstrumentalness : 0.000263\nLiveness : 0.217\nLoudness : -7.596\nSpeechiness : 0.0323\nValence : 0.405\nTempo : 85.03\nKey : 5\nMode : 1\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre>"},{"location":"api_reference/reccobeats_utils/#usage-example","title":"Usage Example","text":"<pre><code>from reccobeats_utils import *\n\nspotify_id = \"1jEBSDN5vYViJQr78W7jr2\"\n\n# Print ReccoBeats track info\nprint_reccobeats_track_id(spotify_id)\nprint_reccobeats_track_title(spotify_id)\n\n# Print audio features\nprint_reccobeats_audio_features(spotify_id)\n</code></pre>"},{"location":"api_reference/spotify_utils/","title":"Spotify Utils","text":"<p>Utility functions for interacting with the Spotify Web API using the Spotipy library. This module provides tools for playback control, playlist management, searching music, and inspecting currently playing data.</p>"},{"location":"api_reference/spotify_utils/#configuration","title":"Configuration","text":"<p>Credentials are loaded automatically from environment variables:</p> <ul> <li><code>SPOTIPY_CLIENT_ID</code></li> <li><code>SPOTIPY_CLIENT_SECRET</code></li> <li><code>SPOTIPY_REDIRECT_URI</code></li> </ul> <p>These must be set before using the module.</p> <p>Every Spotify client is created with the full permission set:</p> <pre><code>user-read-currently-playing  \nuser-read-playback-state  \nuser-modify-playback-state  \nuser-library-read  \nuser-top-read  \nplaylist-read-private  \nplaylist-modify-private  \nplaylist-modify-public\n</code></pre>"},{"location":"api_reference/spotify_utils/#authentication","title":"Authentication","text":""},{"location":"api_reference/spotify_utils/#create_sp","title":"<code>create_sp()</code>","text":"<p>Creates and returns a fully authenticated <code>spotipy.Spotify</code> client using OAuth.</p> <p>Used internally by all other functions.</p>"},{"location":"api_reference/spotify_utils/#safe-mode-write-protection","title":"Safe Mode (Write Protection)","text":"<p>Modifying playlists can be dangerous, so Safe Mode is enabled by default.</p>"},{"location":"api_reference/spotify_utils/#allow_changes","title":"<code>allow_changes()</code>","text":"<p>Disables Safe Mode. Write operations (add/remove/clone playlists) are allowed.</p>"},{"location":"api_reference/spotify_utils/#disallow_changes","title":"<code>disallow_changes()</code>","text":"<p>Enables Safe Mode. Write operations are blocked.</p>"},{"location":"api_reference/spotify_utils/#assert_safe_mode","title":"<code>assert_safe_mode()</code>","text":"<p>Returns <code>True</code> if changes are allowed, otherwise prints a warning and blocks the action.</p>"},{"location":"api_reference/spotify_utils/#track-search","title":"Track Search","text":""},{"location":"api_reference/spotify_utils/#search_tracktrack_name-artist_namenone-limit1","title":"<code>search_track(track_name, artist_name=None, limit=1)</code>","text":"<p>Searches Spotify for a track.</p>"},{"location":"api_reference/spotify_utils/#returns","title":"Returns:","text":"<p>A dictionary:</p> Key Description id Spotify track ID name Track name artists Artist names album Album name release_date Album release year popularity Popularity (0\u2013100) external_url Spotify URL <p>Returns <code>None</code> if no results.</p>"},{"location":"api_reference/spotify_utils/#print_track_infotrack_info","title":"<code>print_track_info(track_info)</code>","text":"<p>Pretty-prints the dictionary from <code>search_track()</code>.</p>"},{"location":"api_reference/spotify_utils/#currently-playing","title":"Currently Playing","text":""},{"location":"api_reference/spotify_utils/#get_current_playing","title":"<code>get_current_playing()</code>","text":"<p>Returns metadata about the currently playing track, or <code>None</code>.</p>"},{"location":"api_reference/spotify_utils/#returned-dictionary-fields","title":"Returned dictionary fields:","text":"Key Description id Track ID name Track name artists Artist(s) album Album release_date Album release date popularity Spotify popularity external_url Track link is_playing True/False progress_ms Playback position duration_ms Total duration"},{"location":"api_reference/spotify_utils/#print_current_playing","title":"<code>print_current_playing()</code>","text":"<p>Prints a formatted \"Now Playing\" display with song info and timecodes.</p>"},{"location":"api_reference/spotify_utils/#get_current_track_id","title":"<code>get_current_track_id()</code>","text":"<p>Returns ID of the currently playing track.</p>"},{"location":"api_reference/spotify_utils/#print_current_track_id","title":"<code>print_current_track_id()</code>","text":"<p>Prints the current track ID.</p>"},{"location":"api_reference/spotify_utils/#playback-control","title":"Playback Control","text":""},{"location":"api_reference/spotify_utils/#pause_playback","title":"<code>pause_playback()</code>","text":"<p>Pauses the current device.</p>"},{"location":"api_reference/spotify_utils/#resume_playback","title":"<code>resume_playback()</code>","text":"<p>Resumes playback.</p>"},{"location":"api_reference/spotify_utils/#next_track","title":"<code>next_track()</code>","text":"<p>Skips to the next track.</p>"},{"location":"api_reference/spotify_utils/#previous_track","title":"<code>previous_track()</code>","text":"<p>Returns to the previous track.</p>"},{"location":"api_reference/spotify_utils/#playlist-identification","title":"Playlist Identification","text":""},{"location":"api_reference/spotify_utils/#get_current_playlist_id","title":"<code>get_current_playlist_id()</code>","text":"<p>Returns the playlist ID being listened to, or <code>None</code> if not listening from a playlist.</p>"},{"location":"api_reference/spotify_utils/#get_current_playlist","title":"<code>get_current_playlist()</code>","text":"<p>Returns the current playlist name, if applicable.</p>"},{"location":"api_reference/spotify_utils/#print_current_playlist_name","title":"<code>print_current_playlist_name()</code>","text":"<p>Prints the name of the playlist you're currently listening to.</p>"},{"location":"api_reference/spotify_utils/#playlist-info","title":"Playlist Info","text":""},{"location":"api_reference/spotify_utils/#get_current_playlist_info","title":"<code>get_current_playlist_info()</code>","text":"<p>Returns metadata for the playlist currently being listened to.</p> <p>Returned dictionary:</p> Key Description id Playlist ID name Playlist name owner Owner username url Spotify URL tracks Number of tracks"},{"location":"api_reference/spotify_utils/#print_current_playlist_info","title":"<code>print_current_playlist_info()</code>","text":"<p>Pretty-prints playlist metadata.</p>"},{"location":"api_reference/spotify_utils/#playlist-tracks","title":"Playlist Tracks","text":""},{"location":"api_reference/spotify_utils/#get_playlist_tracksplaylist_id","title":"<code>get_playlist_tracks(playlist_id)</code>","text":"<p>Returns all tracks in a playlist, including pagination.</p> <p>Each track is returned as:</p> Key Description id Track ID name Track name artists Artist names album Album release_date Release date duration_ms Duration popularity Popularity score url Spotify link"},{"location":"api_reference/spotify_utils/#print_playlist_tracks_dataplaylist_id","title":"<code>print_playlist_tracks_data(playlist_id)</code>","text":"<p>Prints all tracks with numbering + formatted duration.</p>"},{"location":"api_reference/spotify_utils/#print_current_playlist_tracks_data","title":"<code>print_current_playlist_tracks_data()</code>","text":"<p>Prints tracklist for whatever playlist is currently playing.</p>"},{"location":"api_reference/spotify_utils/#playlist-modification","title":"Playlist Modification","text":"<p>Note: All operations are blocked unless Safe Mode is disabled using <code>allow_changes()</code>.</p>"},{"location":"api_reference/spotify_utils/#clone_playlistsource_playlist_id-new_namenone-executefalse","title":"<code>clone_playlist(source_playlist_id, new_name=None, execute=False)</code>","text":"<p>Creates a full duplicate of a playlist.</p> <p>Parameters:</p> Parameter Description source_playlist_id Playlist to clone new_name Optional name for new playlist execute If <code>False</code>: Dry-run (no changes) <p>Returns: new playlist ID or <code>None</code>.</p>"},{"location":"api_reference/spotify_utils/#add_track_to_playlistplaylist_id-track_id-executefalse","title":"<code>add_track_to_playlist(playlist_id, track_id, execute=False)</code>","text":"<p>Adds a track to a playlist (requires Safe Mode OFF).</p>"},{"location":"api_reference/spotify_utils/#remove_track_from_playlistplaylist_id-track_id-executefalse","title":"<code>remove_track_from_playlist(playlist_id, track_id, execute=False)</code>","text":"<p>Removes a specific track from a playlist (requires Safe Mode OFF).</p>"},{"location":"api_reference/spotify_utils/#audio-features-local-printer","title":"Audio Features (Local Printer)","text":""},{"location":"api_reference/spotify_utils/#print_audio_featuresfeatures","title":"<code>print_audio_features(features)</code>","text":"<p>Pretty-prints a dictionary of audio features.</p> <p>Expected fields:</p> <ul> <li>acousticness  </li> <li>danceability  </li> <li>energy  </li> <li>instrumentalness  </li> <li>liveness  </li> <li>loudness  </li> <li>speechiness  </li> <li>valence  </li> <li>tempo  </li> <li>key (optional) </li> <li>mode (optional) </li> <li>time_signature (optional) </li> </ul> <p>If the dict is empty or <code>None</code>, prints a fallback message.</p>"}]}